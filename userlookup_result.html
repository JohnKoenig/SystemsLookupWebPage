<html>

<head>
<Title>UserLookupResult</Title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <center>
    <form action="userlookup_result.php" method="put" name="userlookup">
        <p><a href="index.html">back</a></p>
        <p>Another User Name: <input type"text" name="name">
        <input type="submit" value="Search Again"></p>
    </form>
    </center>

    <iframe src="https://ggoigr3j83.execute-api.us-east-2.amazonaws.com/Prod/systems-update-read/"></iframe>
    <hr>
    <div id="entries">
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type="text/javascript">
        var API_URL = 'https://ggoigr3j83.execute-api.us-east-2.amazonaws.com/Prod/systems-update-read/';
        $(document).ready(function(){
        $.ajax({

        url: API_URL,
        type: 'GET',
        dataType: 'json',

        success: function(data){
            console.log("Success", data);
            $('#entries').html('');
            $('#entries').append('<p>' + data + '</p>');
            }
        });
        });
    </script>

    <p id="demo"></p>

    <script>
        const dbParam = JSON.stringify({table:"customers",limit:20});
        const xmlhttp = new XMLHttpRequest();
        xmlhttp.onload = function() {
            const myObj = JSON.parse(this.responseText);
            let text = "<table border='1'>"
            for (let x in myObj) {
                text += "<tr><td>" + myObj[x].name + "</td></tr>";
            }
            text += "</table>"    
            document.getElementById("demo").innerHTML = text;
        }
        xmlhttp.open("PUT", "userlookup_result.html");
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("x=" + dbParam);
    </script>
</body>
</html>
